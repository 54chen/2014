<html class="no-js" lang="en">
<!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <title>五四陈科学院</title>
    <meta name="author" content="54chen">
  
    
    <meta name="description" content="[科学院新闻]珍惜动物领养基地内测版上线 2009-04-06 00:00:00 +0800 新闻
       为期三天的假期结束，科学院山寨新产品-珍惜动物领养基地上线内测，欢迎参与。
  进入地址：
  http://www.54chen.com/2/ 特点：
  1.此珍惜动物非珍稀动物， …">
    
  
    <!-- http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  
    
    <link rel="canonical" href="https://www.54chen.com/posts/47">
    <link href="/favicon.png" rel="icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/fkwb.css?v6" type="text/css" rel="stylesheet">  
    <link href="/atom.xml" rel="alternate" title="五四陈科学院" type="application/atom+xml">
    	<link rel="apple-touch-icon" href="touch-icon.png">
  	<link rel="shortcut icon" href="/favicon.ico">
  
    
  
    <style type="text/css">.entry-content table {display: block;width: 100%;overflow: auto;word-break: normal;word-break: keep-all;}.entry-content table th {font-weight: bold;}.entry-content table th,.entry-content table td {padding: 6px 13px;border: 1px solid #ddd;}.entry-content table tr {background-color: #fff;border-top: 1px solid #ccc;}.entry-content table tr:nth-child(2n) {background-color: #f8f8f8;}</style>
  </head>
  
  <body>
    <header role="banner" class="banner_css"><a style="float:left" href="/"><img border="0" src="/images/54chen-logo.gif" alt="五四陈科学院-相信科学，分享技术." title="五四陈科学院-相信科学，分享技术.">
  </a>
  <div>
      <a href="/">首页</a>
      <a href="/blog/archives">归档</a>
      <a href="/video">视频</a>
      <a href="/about">关于</a>
  
      <a href="http://blog.54chen.com" style="color:white;font-size:9px">想找最新内容？</a>
  </div>
  <div class="subscription">
    
  <form action="https://www.54chen.com/cgi" method="get">
    <fieldset role="search">
      
      <input class="search" type="text" name="key" placeholder="Search">
    </fieldset>
  </form>
    
  
  </div>
  
  </header>
    <nav role="navigation"><ul class="subscription" data-subscription="rss">
    <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
    
  </ul>
    
  <form action="https://www.54chen.com/cgi" method="get">
    <fieldset role="search">
      
      <input class="search" type="text" name="key" placeholder="Search">
    </fieldset>
  </form>
    
    <li><a href="/">Blog</a></li>
    <li><a href="/blog/archives">Archives</a></li>
  
  </nav>
    <div id="main">
      <div id="content">
        <div class="blog-index">
    
    
    
      <article>
        
    <header>
      
        <h1 class="entry-title"><a href="/blog/2009/04/06/%E7%A7%91%E5%AD%A6%E9%99%A2%E6%96%B0%E9%97%BB%E7%8F%8D%E6%83%9C%E5%8A%A8%E7%89%A9%E9%A2%86%E5%85%BB%E5%9F%BA%E5%9C%B0%E5%86%85%E6%B5%8B%E7%89%88%E4%B8%8A%E7%BA%BF/">[科学院新闻]珍惜动物领养基地内测版上线</a></h1>
      
      
        <p class="meta">
          
  
  
  
  
  
  
  
  
    
  
  
  
  <time datetime="2009-04-06T00:00:00+08:00" pubdate data-updated="true">2009-04-06 00:00:00 +0800</time>
          
        </p>
      
    </header>
  
  
    <div class="entry-content entry-content1">
<p></p>
<h1 style="text-align: center;">新闻</h1>
  <p style="text-align: left;">     为期三天的假期结束，科学院山寨新产品-珍惜动物领养基地上线内测，欢迎参与。<br>
  进入地址：
  <a href="http://www.54chen.com/2/">http://www.54chen.com/2/</a></p>
  
  <p></p>
<p style="text-align: left;">特点：<br>
  1.此珍惜动物非珍稀动物，意在申请了要珍惜，不然此种动物会慢慢由大变小直到挂掉。<br>
  2.对于此动物的其他意义54chen不发表任何额外意见，提供在此仅供学习和娱乐。<br>
  3.欢迎抢短数字的ID（还有大量1-9的ID，一共9个...）。</p>
  
  <p></p>
<p style="text-align: left;">3.5.里面的天气预报是山寨的，不过是非常准确的，判断了来访者的地域显示，和cctv的一样准。 <br>
  4.路过帮我喂。
  </p>
<div style="width: 250px; padding: 0; margin: 0; border: 1px solid #000; text-align: center;"><object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="250" height="300" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="bgcolor" value="#ffffff">
<param name="flashvars" value="cn=零蛋坐骑&amp;an=零蛋&amp;clr=0xedd177&amp;uid=1">
<param name="src" value="http://www.54chen.com/2/f/ma2.swf">
<embed type="application/x-shockwave-flash" width="250" height="300" src="http://www.54chen.com/2/f/ma2.swf" flashvars="cn=零蛋坐骑&amp;an=零蛋&amp;clr=0xedd177&amp;uid=1" bgcolor="#ffffff"></embed></object></div>
  <a href="http://www.54chen.com/2/">领养一个珍惜动物!</a>
  </div>
    
    
  
  
      </article>
    
    
      <article>
        
    <header>
      
        <h1 class="entry-title"><a href="/blog/2009/04/01/%E5%8E%9F%E5%88%9B%E6%89%93%E5%80%92%E6%8A%95%E7%A5%A8%E4%BD%9C%E5%BC%8A%EF%BC%8C%E5%B7%A7%E7%94%A8flex%E9%98%B2%E5%88%B7%E7%A5%A8/">[原创]打倒投票作弊，巧用flex防刷票</a></h1>
      
      
        <p class="meta">
          
  
  
  
  
  
  
  
  
    
  
  
  
  <time datetime="2009-04-01T00:00:00+08:00" pubdate data-updated="true">2009-04-01 00:00:00 +0800</time>
          
        </p>
      
    </header>
  
  
    <div class="entry-content entry-content1">
<p>[文章作者：陈臻 本文版本：v1.2 最后修改：2009.4.28 转载请注明原文链接：<a href="http://www.54chen.com/c/520">http://www.54chen.com/c/520</a> ]</p>
  
  <p>在ID<a href="http://www.54chen.com/c/17">投票</a>的应用中，如果投票后的奖品丰富，必然会招来各种各样的刷票机和人肉刷票，如何防止刷票，也就成了大家头疼的事情。</p>
  
  <p>一般情况下，大家都会使用限制IP的策略，同时加上Cookies，但是日常都刷票机都能解决掉这两种方法，下面介绍的是一种比较少用一些的方法，就是利用<a href="http://www.54chen.com/c/96">flash</a>的share object机制来防止刷票，这只能增加刷票的成本，而不能完全规避这种行为，要做到没人刷票而又，基本上只能靠--人。</p>
  
  <p>下面请看flex代码,内附注释(xx.mxml)：
  </p>
<blockquote>&lt;?xml version="1.0" encoding="utf-8"?&gt;<br>
  &lt;mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" initialize="init()" applicationComplete="onBrowseClick()" width="190" height="54" horizontalAlign="center" verticalAlign="middle" alpha="0.44" backgroundGradientAlphas="[0.0, 0.0]" backgroundGradientColors="[#ffffff, #ffffff]"&gt;<br>
  &lt;mx:Script&gt;<br>
  &lt;![CDATA[<br>
  import flash.external.*;<br>
  import com.cc.StringManipulator;<br>
  import com.cc.Md5;<br>
  import mx.controls.Alert;<br>
  [Bindable]<br>
  public var myTime:String;<br>
  [Bindable]<br>
  public var myUid:String;<br>
  [Bindable]<br>
  public var myHash:String;
  <p>private function init():void{//初始化 通过下面三个html传过来的参数进行下一步的计算<br>
  myTime = Application.application.parameters.t;<br>
  myUid = Application.application.parameters.u;<br>
  myHash = Application.application.parameters.h;<br>
  }
  private function onBrowseClick():void{<br>
  var hk123:SharedObject = SharedObject.getLocal( "hk123" );<br>
  var temp:String = hk123.data[myUid];<br>
  var hashCode2:String = '';<br>
  hk123.data[myUid]=myTime;<br>
  hk123.data.dt = myTime;<br>
  hk123.flush();<br>
  hashCode2 = Md5.calculate('caoninengdudaozelizhenxian' + myUid + myHash);//这一行自己加了个密钥串和传来的用户ID和服务器串进行md5 如果能破解flash到这里 这个基本上就破了
  <a href="http://www.54chen.com/c/350">ExternalInterface</a>.call("browse",temp,hashCode2);//提交到html里的js function-&gt;browse,通过这个js把form提交给服务器端，去计算整个串是不是对的或者是不是使用过的，也就可以限制重复了<br>
  }
  ]]&gt;<br>
  &lt;/mx:Script&gt;<br>
  &lt;/mx:Application&gt;</p>
  </blockquote>
  <p> 
  PS:</p>
  
  <p>有许多朋友来mail问我js部分，特地加一下，其实就是一个简单的function，里面怎么写都行，只要把参数传到服务器端就成：</p>
  
  <p> 
  </p>
<div>大致如下</div>
  <blockquote>
  <div>function <span>browse(a,b)</span>
</div>
  <div><span>{</span></div>
  <div><span>form.action += '&amp;s1=a&amp;s2=b';</span></div>
  <div><span>form.submit();//其实用ajax传也不失为一个好办法</span></div>
  <div>
<span>}
  </span>这就把一个form提出去了，你当然还可以用ajax什么的直接发那两个值去服务器端就是了。</div>
</blockquote>
  END
  </div>
    
    
  
  
      </article>
    
    
      <article>
        
    <header>
      
        <h1 class="entry-title"><a href="/blog/2009/03/30/%E6%89%8B%E6%9C%BA%E4%B9%8B%E5%AE%B6%E6%96%B0%E7%B3%BB%E7%BB%9F%E4%BB%8B%E7%BB%8D%E5%8F%8A%E6%9E%B6%E6%9E%84%E5%88%86%E4%BA%AB/">手机之家新系统介绍及架构分享</a></h1>
      
      
        <p class="meta">
          
  
  
  
  
  
  
  
  
    
  
  
  
  <time datetime="2009-03-30T00:00:00+08:00" pubdate data-updated="true">2009-03-30 00:00:00 +0800</time>
          
        </p>
      
    </header>
  
  
    <div class="entry-content entry-content1">
<p>上周听小兄弟<a href="http://www.blankyao.cn/blog/" target="_blank">blankyao</a>介绍说手机之家有个技术交流会，忙着搞校内的群组，一时没在意，这周看了dbanotes冯老大的文章才知道爆了不少料，挺不错的交流会，没去后悔了。附会议ppt,转自 <a href="http://dbanotes.net" target="_blank">http://dbanotes.net</a>
  </p>
<div id="__ss_1218991" style="width: 425px; text-align: left;">
<a style="font:14px Helvetica,Arial,Sans-serif;display:block;margin:12px 0 3px 0;text-decoration:underline;" title="手机之家新系统介绍及架构分享" href="http://www.slideshare.net/Fenng/ss-1218991?type=powerpoint">手机之家新系统介绍及架构分享</a><object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="425" height="355" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowFullScreen" value="true">
<param name="allowScriptAccess" value="always">
<param name="src" value="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=imobile-com-cn-090329210734-phpapp02&amp;stripped_title=ss-1218991">
<embed type="application/x-shockwave-flash" width="425" height="355" src="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=imobile-com-cn-090329210734-phpapp02&amp;stripped_title=ss-1218991" allowscriptaccess="always" allowfullscreen="true"></embed></object>
  <div style="font-size: 11px; font-family: tahoma,arial; height: 26px; padding-top: 2px;">View more <a style="text-decoration:underline;" href="http://www.slideshare.net/">presentations</a> from <a style="text-decoration:underline;" href="http://www.slideshare.net/Fenng">Fenng Feng</a>.</div>
  很遗憾没能在现场提问，细细看完整个ppt，基本上了解了整个DAL的想法，一直都在思考去弄一个这样的东西，始终都有瓶颈，对于DAL的构思没有什么想法，总结一下，没有看出我遇到的问题的解决方案，列出一下:</div>
  
  <p>1.DAL能解决多维度的数据在高负载下的瓶颈吗？有什么方案？多维度：比如说豆瓣的群组，假设一个人有10W个组，每个组里有100w个人，如果应用要求列出每个组的人和每个人的组，只用一份数据，DAL+缓存能搞定吗？</p>
  
  <p>2.如果只是靠硬件来撑DB的访问量，那DAL和DBproxy或主从DB的优势在哪里？</p>
  </div>
    
    
  
  
      </article>
    
    
      <article>
        
    <header>
      
        <h1 class="entry-title"><a href="/blog/2009/03/28/54chen-has-joined-in-one-earth-hour/">54chen Has Joined in One Earth Hour</a></h1>
      
      
        <p class="meta">
          
  
  
  
  
  
  
  
  
    
  
  
  
  <time datetime="2009-03-28T00:00:00+08:00" pubdate data-updated="true">2009-03-28 00:00:00 +0800</time>
          
        </p>
      
    </header>
  
  
    <div class="entry-content entry-content1">
<p><object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="310" height="258" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="src" value="http://swf.ws.126.net/flvplayer081128/~false~0001_V548PN0LL~vimg2.ws.126.net/image/snapshot/2009/3/L/M/V548PN0LM~.swf">
<embed type="application/x-shockwave-flash" width="310" height="258" src="http://swf.ws.126.net/flvplayer081128/~false~0001_V548PN0LL~vimg2.ws.126.net/image/snapshot/2009/3/L/M/V548PN0LM~.swf"></embed></object></p>
  
  <p>“地球一小时”是WWF（世界自然基金会）应对全球气候变化所提出的一项倡议，希望参与到活动中的个人、社区、企业或可以在特定的时间熄灯一小时，以此来激发人们对保护地球的责任感。今年的3月28日的20:30至21:30之间，预计全球将会有超过80个的千余个城市和约为10亿人参与到“地球一小时”活动当中。</p>
  </div>
    
    
  
  
      </article>
    
    
      <article>
        
    <header>
      
        <h1 class="entry-title"><a href="/blog/2009/03/19/%E6%A0%A1%E5%86%85%E7%BD%91%E6%8B%9B%E8%81%98flash-a3%E5%B7%A5%E7%A8%8B%E5%B8%88/">校内网招聘Flash A3工程师</a></h1>
      
      
        <p class="meta">
          
  
  
  
  
  
  
  
  
    
  
  
  
  <time datetime="2009-03-19T00:00:00+08:00" pubdate data-updated="true">2009-03-19 00:00:00 +0800</time>
          
        </p>
      
    </header>
  
  
    <div class="entry-content entry-content1">
<p> </p>
  
  <p>任职要求：</p>
  
  <p>1、计算机、软件类相关专业本科以上学历； </p>
  
  <p>2、热爱技术，对编程有足够的兴趣，勇于尝试，较强的创新能力； </p>
  
  <p>3、具有良好的算法基础及系统分析能力，具备良好的编程习惯。</p>
  
  <p>4、对AS2,Flex有了解,熟悉AS3开发及架构体系；</p>
  
  <p>5、有完成程序架构和撰写的能力，对Flash的架构设计有一定的认识；</p>
  
  <p>6、至少会使用一种图片处理软件，如：Photoshop；</p>
  
  <p>7、至少会一种后端程序语言，如：ASP，PHP，JSP 等。</p>
  
  <p>6、系统工程师</p>
  
  <p>职位描述</p>
  
  <p>1. 负责大规模Linux服务器的日常监管维护；</p>
  
  <p>2. 提供服务器系统相关的内部技术支持；</p>
  
  <p>3. 或协助开发人员优化业务系统；</p>
  
  <p>职位要求</p>
  
  <p>1、二年以上 Linux 系统管理经验，或两年以上的Linux环境下C、C++、Python或PHP软件开发的经验；</p>
  
  <p>2. 熟练使用 Linux 下的各种系统维护相关的工具；</p>
  
  <p>3、熟练编写日常工作所需的脚本；</p>
  
  <p>4、熟悉Linux服务器上常用服务的部署、检测、排障；</p>
  
  <p>5、掌握并能熟练运用网络协议等基本原理；</p>
  
  <p>6、较强的文档编写能力</p>
  
  <p> 要求，全日制本科以上学历</p>
  
  <p> 211工程学校的优先考虑</p>
  
  <p>待遇：5.6.7.8.9.10 等等</p>
  
  <p>另招 DBA、c++、wap、产品经理、系统工程师 有兴趣的m我推荐</p>
  
  <p>czhttp at mail dot com</p>
  </div>
    
    
  
  
      </article>
    
    
      <article>
        
    <header>
      
        <h1 class="entry-title"><a href="/blog/2009/03/17/%E6%A0%A1%E5%86%85%E7%BD%91%E6%8B%9B%E8%81%98%E7%A0%94%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%B8%88/">校内网招聘研发工程师</a></h1>
      
      
        <p class="meta">
          
  
  
  
  
  
  
  
  
    
  
  
  
  <time datetime="2009-03-17T00:00:00+08:00" pubdate data-updated="true">2009-03-17 00:00:00 +0800</time>
          
        </p>
      
    </header>
  
  
    <div class="entry-content entry-content1">
<p>任职资格：</p>
  
  <p>1、计算机或通信、数学等相关专业毕业；</p>
  
  <p>2、至少3年以上软件开发经验，有团队合作；</p>
  
  <p>3、精通java面向对象编程，精通JSP/Servlet/HTML/JavaScript/JDBC/XML；</p>
  
  <p>4、了解MVC和Apache Struts，Spring，Hibernate者；</p>
  
  <p>5、熟悉Oracle，Sql Server，Mysql等数据库开发经验；</p>
  
  <p>6、精通HTML、JavaScript；精通JSP、Java的开发；精通SQL程序设计；</p>
  
  <p>7、熟悉Apache、Tomcat、Resin等配置；</p>
  
  <p> 要求，全日制本科以上学历</p>
  
  <p> 211工程学校的优先考虑</p>
  
  <p>待遇：5.6.7.8.9.10 等等</p>
  </div>
    
    
  
  
      </article>
    
    
      <article>
        
    <header>
      
        <h1 class="entry-title"><a href="/blog/2009/03/16/discuz-bbs-active-and-passive-cache/">[原创]Discuz! BBS的主动缓存和被动缓存</a></h1>
      
      
        <p class="meta">
          
  
  
  
  
  
  
  
  
    
  
  
  
  <time datetime="2009-03-16T00:00:00+08:00" pubdate data-updated="true">2009-03-16 00:00:00 +0800</time>
          
        </p>
      
    </header>
  
  
    <div class="entry-content entry-content1">
<p>[文章作者：陈臻 本文版本：v1.1 最后修改：2009.3.16 转载请注明原文链接：<a href="http://www.54chen.com/c/505">http://www.54chen.com/c/505</a>]
  </p>
<p class="MsoNormal" style="MARGIN: 0cm 0cm 0pt; TEXT-INDENT: 21.75pt"><span style="font-size: small;"><span lang="EN-US"><span style="font-family: Times New Roman;">DZ</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的缓存同样分了主动缓存和被动缓存。从功能上来说，主动缓存一般用到管理员对全站的设置，等等需要手动更新的地方，这些地方的数据都有一个特点，那就是它们的更新可能性很小，平时不需要自动更新；</span><span lang="EN-US"><span style="font-family: Times New Roman;">DZ</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的被动缓存，一般分布在诸如帖子内容显示，用户信息更新这些地方，这些地方的更新基本上都是因为用户使用了某一特定的功能时所激发的。</span></span></p>
  <p class="MsoNormal" style="MARGIN: 0cm 0cm 0pt; TEXT-INDENT: 21.75pt"><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">在正常运行的</span><span lang="EN-US"><span style="font-family: Times New Roman;">DZ</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">系统文件夹里面会有一个</span><span lang="EN-US"><span style="font-family: Times New Roman;">forum<a href="http://www.54chen.com/c/399">data</a></span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">文件夹，这个是论坛记录和缓存文件的存放目录，一般这些文件都是自动生成的，在</span><span lang="EN-US"><span style="font-family: Times New Roman;">forumdata/cache/</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">里面存储的都是一些</span><span lang="EN-US"><span style="font-family: Times New Roman;">DZ</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的基本设置和一些常使用的值，这些值一般在系统初始化的时候就保存在</span><span lang="EN-US"><span style="font-family: Times New Roman;">$_DCACHE</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">全局变量中，在后面的作中将可以简单地使用它们进行功能上的判断。</span></span></p>
  <p class="MsoNormal" style="MARGIN: 0cm 0cm 0pt; TEXT-INDENT: 21.75pt"><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">（</span><span lang="EN-US"><span style="font-family: Times New Roman;">1</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">）主动缓存，也就是只在用户作后台时，由</span><span lang="EN-US"><span style="font-family: Times New Roman;">DZ</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">系统去删除原有缓存进行更新的缓存。它们普遍存在于</span><span lang="EN-US"><span style="font-family: Times New Roman;">forumdata/cache/</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">目录中，比如说</span><span lang="EN-US"><span style="font-family: Times New Roman;">/forumdata/cache/cache_settings.php</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">保存了整个系统的核心设置，一般情况是不会更新的，只有后台修改了比如站点名称等关键信息的时候才会去主动更新这个缓存文件。还有用于保存用户组和管理员组相关信息的两类缓存文件：</span></span></p>
  <p class="MsoNormal" style="MARGIN: 0cm 0cm 0pt; TEXT-INDENT: 21.75pt"><span lang="EN-US"><span style="font-size: small; font-family: Times New Roman;">/forumdata/cache/usergroup_'.intval($groupid).'.php</span></span></p>
  <p class="MsoNormal" style="MARGIN: 0cm 0cm 0pt; TEXT-INDENT: 21.75pt"><span lang="EN-US"><span style="font-size: small; font-family: Times New Roman;">/forumdata/cache/admingroup_'.intval($adminid).'.php</span></span></p>
  <p class="MsoNormal" style="MARGIN: 0cm 0cm 0pt; TEXT-INDENT: 21.75pt"><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">另外还有在</span><span lang="EN-US"><span style="font-family: Times New Roman;">index</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">、</span><span lang="EN-US"><span style="font-family: Times New Roman;">forumdisplay</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">、</span><span lang="EN-US"><span style="font-family: Times New Roman;">viewthread</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">、</span><span lang="EN-US"><span style="font-family: Times New Roman;">post</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">、</span><span lang="EN-US"><span style="font-family: Times New Roman;">blog</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">、</span><span lang="EN-US"><span style="font-family: Times New Roman;">topicadmin</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">、</span><span lang="EN-US"><span style="font-family: Times New Roman;">register</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">、</span><span lang="EN-US"><span style="font-family: Times New Roman;">archiver</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">几个模块中的时候分别会使用的</span><span lang="EN-US"><span style="font-family: Times New Roman;">cache_'</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">模块名</span><span lang="EN-US"><span style="font-family: Times New Roman;">'.php</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的缓存。在</span><span lang="EN-US"><span style="font-family: Times New Roman;">include/common.inc.php</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">中的流程可以看到，这些类似的主动缓存都有一个特点：统一进行引用（</span><span lang="EN-US"><span style="font-family: Times New Roman;">include</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">），最后进行失败检测，最后再对失败的缓存（比如说文件丢失或者是上次更新还没生成这样的情况下）统一进行重新生成的作，具体的生成方法见</span><span lang="EN-US"><span style="font-family: Times New Roman;">/include/cache.func.php</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">中的</span><span lang="EN-US"><span style="font-family: Times New Roman;">updatecache</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">函数。</span></span></p>
  <p class="MsoNormal" style="MARGIN: 0cm 0cm 0pt; TEXT-INDENT: 21.75pt"><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">（</span><span lang="EN-US"><span style="font-family: Times New Roman;">2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">）被动缓存，也就是缓存的生成并非是由用户手动更新的，而是在系统里判断是否需要生成缓存，需要缓存多长时间，由系统自身来完成整个过程。很典型的有帖子内容的缓存生成过程。帖子内容的缓存路径被</span><span lang="EN-US"><span style="font-family: Times New Roman;">cache_setting.<a href="http://www.54chen.com/c/157">php</a></span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">里定义为一个可以由用户修改的值，默认是在</span><span lang="EN-US"><span style="font-family: Times New Roman;">forumdata/threadcaches</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">下，由</span><span lang="EN-US"><span style="font-family: Times New Roman;">viewthread.php</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">里的逻辑可以看到，当满足使用缓存条件的时候（一般情况是第一页的内容），系统会执行</span><span lang="EN-US"><span style="font-family: Times New Roman;">viewthread_loadcache</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">函数，此函数会判断缓存是否过期，如果不过期就执行函数中间读取缓存的作，最后</span><span lang="EN-US"><span style="font-family: Times New Roman;">DZ</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">直接巧妙地在函数中</span><span lang="EN-US"><span style="font-family: Times New Roman;">die</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">出一段</span><span lang="EN-US"><span style="font-family: Times New Roman;">javaScript</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，结束访问。专研</span><span lang="EN-US"><span style="font-family: Times New Roman;">DZ</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">代码的你可能会很疑惑，究竟是什么时候生成的缓存呢？</span><span lang="EN-US"><span style="font-family: Times New Roman;">include</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">文件夹里有一个</span><span lang="EN-US"><span style="font-family: Times New Roman;">global.func.php</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，这个文件包括了整个</span><span lang="EN-US"><span style="font-family: Times New Roman;">DZ</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">系统使用到的全局方法，其中有一个叫</span><span lang="EN-US"><span style="font-family: Times New Roman;">output</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的函数，在函数里判断了是否可以缓存当前的页面，并且使用</span><span lang="EN-US"><span style="font-family: Times New Roman;">ob_get_contents</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">函数直接缓存页面。</span></span></p>
  <p class="MsoList" style="MARGIN: 0cm 0cm 0pt 63.8pt"><span style="font-size: small;"><span style="font-family: 楷体_GB2312; mso-ascii-font-family: 'Times New Roman';">提示：</span><span lang="EN-US"><span style="font-family: Times New Roman;">ob_start()</span></span><span style="font-family: 楷体_GB2312; mso-ascii-font-family: 'Times New Roman';">在服务器打开一个缓冲区来保存所有的输出。所以在任何时候使用</span><span lang="EN-US"><span style="font-family: Times New Roman;">echo </span></span><span style="font-family: 楷体_GB2312; mso-ascii-font-family: 'Times New Roman';">，输出都将被加入缓冲区中，直到程序运行结束或者使用</span><span lang="EN-US"><span style="font-family: Times New Roman;">ob_flush()</span></span><span style="font-family: 楷体_GB2312; mso-ascii-font-family: 'Times New Roman';">来结束。然后在服务器中缓冲区的内容才会发送到浏览器，由浏览器来解析显示。函数</span><span lang="EN-US"><span style="font-family: Times New Roman;">ob_end_clean </span></span><span style="font-family: 楷体_GB2312; mso-ascii-font-family: 'Times New Roman';">会清除缓冲区的内容，并将缓冲区关闭，但不会输出内容。此时得用一个函数</span><span lang="EN-US"><span style="font-family: Times New Roman;">ob_get_contents()</span></span><span style="font-family: 楷体_GB2312; mso-ascii-font-family: 'Times New Roman';">在</span><span lang="EN-US"><span style="font-family: Times New Roman;">ob_end_clean()</span></span><span style="font-family: 楷体_GB2312; mso-ascii-font-family: 'Times New Roman';">前面来获得缓冲区的内容。这样的话，</span><span style="font-family: Times New Roman;"> </span><span style="font-family: 楷体_GB2312; mso-ascii-font-family: 'Times New Roman';">能将在执行</span><span lang="EN-US"><span style="font-family: Times New Roman;">ob_end_clean()</span></span><span style="font-family: 楷体_GB2312; mso-ascii-font-family: 'Times New Roman';">前把内容保存到一个变量中，然后在</span><span lang="EN-US"><span style="font-family: Times New Roman;">ob_end_clean()</span></span><span style="font-family: 楷体_GB2312; mso-ascii-font-family: 'Times New Roman';">后面对这个变量做作。</span></span></p>
  
  <p>关于哥学社：
  <a title="哥学社" href="http://www.54chen.com/blog-brother" target="_self">哥学社</a>是一个博客组织，以提高原创技术博客质量，为成员博客增加更有效评论，由来自腾讯、百度、盛大、人人网、新浪、奇虎、TOM等各大企业的哥们共同起草发起。</p>
  
  <p>关于五四陈：<br>
  54chen(陈臻)，人人网海量存储NuClear核心开发人员，业余时间混迹于各技术组织且乐此不疲。目前关注实施PHP培训。对flex等前端技术有一点研究。<br>
  个人技术站点:<a href="http://www.54chen.com/">http://www.54chen.com/</a> 。可以通过电子邮件 cc0cc@126.com 联系到他。</p>
  </div>
    
    
  
  
      </article>
    
    
      <article>
        
    <header>
      
        <h1 class="entry-title"><a href="/blog/2009/03/10/%E5%8E%9F%E5%88%9B%E6%94%B6%E9%9B%86%E5%90%84%E7%A7%8D%E8%AF%AD%E8%A8%80%E7%89%88%E6%9C%AC%E7%9A%84%E5%8F%98%E9%87%8F%E5%80%BC%E4%BD%9C%E5%8F%98%E9%87%8F%E5%90%8D%E7%9A%84%E6%96%B9%E6%B3%95/">[原创][收集]各种语言版本的变量值作变量名的方法</a></h1>
      
      
        <p class="meta">
          
  
  
  
  
  
  
  
  
    
  
  
  
  <time datetime="2009-03-10T00:00:00+08:00" pubdate data-updated="true">2009-03-10 00:00:00 +0800</time>
          
        </p>
      
    </header>
  
  
    <div class="entry-content entry-content1">
<p>[文章作者：陈臻 本文版本：v1.1 最后修改：2009.3.11 转载请注明原文链接：<a href="http://www.54chen.com/c/498">http://www.54chen.com/c/498</a>]</p>
  
  <p>在写代码的过程中，不可避免经常遇到的一个问题是，如何将上下文中的变量值当变量名。本文将收集各种语言下的情况，以供参考。</p>
  
  <p><strong>PHP</strong></p>
  
  <p>这是最最简单的一种：</p>
  
  <p>&lt;?php</p>
  
  <p>$fruit = "apple";</p>
  
  <p>$var = "fruit";</p>
  
  <p>echo <span style="color: #ff0000;">$$</span>var;</p>
  
  <p>?&gt;</p>
  
  <p>将得到结果 apple</p>
  
  <p><strong>JAVA</strong></p>
  
  <p><strong>JavaScript</strong></p>
  
  <p>&lt;script type="text/javascript"&gt;<br>
  var str = "hello world!";<br>
  var str2 = "str";<br>
  alert(<span style="color: #ff0000;">eval</span>(str2));<br>
  &lt;/script&gt;</p>
  
  <p>将得到结果：hello world</p>
  
  <p><strong>AS2</strong></p>
  
  <p><strong>AS3</strong></p>
  
  <p><strong>Perl</strong></p>
  
  <p><strong>C</strong></p>
  
  <p><strong>ＶＦＰ</strong></p>
  
  <p>str1="Gaom"<br>
  str2="str1"<br>
  WAIT WINDOW &amp;str2.<br>
  得到“Gaom”               <strong><span style="color: #ff0000;">VFP程序由Gaom同志赞助播映</span></strong></p>
  
  <p><strong>Shell</strong></p>
  
  <p>v1=aaa<br>
  v2=bbb<br>
  c=1<br>
  if [ $c -eq 1 ]<br>
  then<br>
    vname=v$c   #找到符合条件的变量名为v1<br>
    eval vvv="$"$vname ; echo vvv: $vvv    #将变量v1的值赋予vvv,即,使vvv=aaa<br>
    eval vvv='$'$vname ; echo vvv: $vvv    #将变量v1的值赋予vvv,即,使vvv=aaa<br>
  #eval vvv=$$vname   ; echo vvv: $vvv    #错误用法<br>
  fi</p>
  </div>
    
    
  
  
      </article>
    
    
      <article>
        
    <header>
      
        <h1 class="entry-title"><a href="/blog/2009/03/05/%E6%9C%AC%E7%AB%99%E6%9C%8D%E5%8A%A1%E5%99%A8mysql%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98-%E6%9C%9B%E8%B0%85/">本站服务器mysql遇到问题 望谅</a></h1>
      
      
        <p class="meta">
          
  
  
  
  
  
  
  
  
    
  
  
  
  <time datetime="2009-03-05T00:00:00+08:00" pubdate data-updated="true">2009-03-05 00:00:00 +0800</time>
          
        </p>
      
    </header>
  
  
    <div class="entry-content entry-content1">
<p>本站服务器mysql遇到问题 访问时会时常出现db error 机房正在处理 望谅</p>
  
  <p></p>
  </div>
    
    
  
  
      </article>
    
    
      <article>
        
    <header>
      
        <h1 class="entry-title"><a href="/blog/2009/03/05/%E5%A6%82%E4%BD%95%E7%94%A8php%E4%BB%A3%E7%A0%81%E6%B8%85%E7%A9%BAsquid%E7%BC%93%E5%AD%98%E4%B8%8B%E7%9A%84%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6/">如何用php代码清空squid缓存下的指定文件</a></h1>
      
      
        <p class="meta">
          
  
  
  
  
  
  
  
  
    
  
  
  
  <time datetime="2009-03-05T00:00:00+08:00" pubdate data-updated="true">2009-03-05 00:00:00 +0800</time>
          
        </p>
      
    </header>
  
  
    <div class="entry-content entry-content1">
<p>[文章作者：陈臻 本文版本：v1.0 最后修改：2009.3.5 转载请注明原文链接：http://www.54chen.com/c/490]</p>
  
  <p>    PURGE 是一个特殊的<a href="http://www.54chen.com/c/417">HTTP</a>请求方法。它是Squid 的专有方法，没有在任何RFC 里定义。它让管理员能强制删除缓存对象。既然该方法有些危险，squid 默认拒绝PURGE 请求，除非你定义了ACL 引用了该方法。否则，任何能访问cache 者也许能够删除任意缓存对象。我推荐仅仅允许来自localhost 的PURGE:<br>
  acl Purge method PURGE<br>
  acl Localhost src 127.0.0.1<br>
  http_access allow Purge Localhost<br>
  http_access deny Purge  （squid.conf摘要）</p>
  
  <p>以下是使用purge删除指定文件的两个函数：</p>
  
  <p>    //发送socket数据<br>
  function socket_service($ip, $port='80', $out="")<br>
   if(trim($ip)=="")return "Error: without dest host!";<br>
   if($out=='') $out="GET / HTTP/1.1\r\nHost: $ip\r\n\r\n";<br>
   $sock = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);<br>
   $sourceips['internal'] = '6.4.10.9';<br>
   $sourceips['external'] = '6.4.10.9';<br>
   socket_bind($sock, $sourceips['internal']);<br>
   socket_connect($sock, $ip, $port);<br>
   socket_write($sock, $out);<br>
   $return=socket_read($sock,100000);<br>
   socket_close($sock);<br>
   return $return;<br>
  //更新url指定的文件cache<br>
  function purgeFile($url)<br>
  {
    $squid_dv=array("1.5.5.6","6.6.8.8");//两个前端squid<br>
    $request="PURGE $url \n";<br>
    foreach($squid_dv as $key =&gt; $ip)<br>
    {<br>
     $result=socket_service($ip,80,$request);<br>
    }<br>
  }</p>
  
  <p>  这样只需要在代码里使用 purgeFile('/xxx.gif');即可将上述两个服务器中指定的路径文件缓存删除。</p>
  </div>
    
    
  
  
      </article>
    
  
  
  <div class="pagination">
    
      <a href="/posts/46">« Prev</a>
    
  
    
      
        <a href="/">1</a>
      
    
      
        <a href="/posts/2">2</a>
      
    
      
        <a href="/posts/3">3</a>
      
    
      
        <a href="/posts/4">4</a>
      
    
      
        <a href="/posts/5">5</a>
      
    
      
        <a href="/posts/6">6</a>
      
    
      
        <a href="/posts/7">7</a>
      
    
      
        <a href="/posts/8">8</a>
      
    
      
        <a href="/posts/9">9</a>
      
    
      
        <a href="/posts/10">10</a>
      
    
      
        <a href="/posts/11">11</a>
      
    
      
        <a href="/posts/12">12</a>
      
    
      
        <a href="/posts/13">13</a>
      
    
      
        <a href="/posts/14">14</a>
      
    
      
        <a href="/posts/15">15</a>
      
    
      
        <a href="/posts/16">16</a>
      
    
      
        <a href="/posts/17">17</a>
      
    
      
        <a href="/posts/18">18</a>
      
    
      
        <a href="/posts/19">19</a>
      
    
      
        <a href="/posts/20">20</a>
      
    
      
        <a href="/posts/21">21</a>
      
    
      
        <a href="/posts/22">22</a>
      
    
      
        <a href="/posts/23">23</a>
      
    
      
        <a href="/posts/24">24</a>
      
    
      
        <a href="/posts/25">25</a>
      
    
      
        <a href="/posts/26">26</a>
      
    
      
        <a href="/posts/27">27</a>
      
    
      
        <a href="/posts/28">28</a>
      
    
      
        <a href="/posts/29">29</a>
      
    
      
        <a href="/posts/30">30</a>
      
    
      
        <a href="/posts/31">31</a>
      
    
      
        <a href="/posts/32">32</a>
      
    
      
        <a href="/posts/33">33</a>
      
    
      
        <a href="/posts/34">34</a>
      
    
      
        <a href="/posts/35">35</a>
      
    
      
        <a href="/posts/36">36</a>
      
    
      
        <a href="/posts/37">37</a>
      
    
      
        <a href="/posts/38">38</a>
      
    
      
        <a href="/posts/39">39</a>
      
    
      
        <a href="/posts/40">40</a>
      
    
      
        <a href="/posts/41">41</a>
      
    
      
        <a href="/posts/42">42</a>
      
    
      
        <a href="/posts/43">43</a>
      
    
      
        <a href="/posts/44">44</a>
      
    
      
        <a href="/posts/45">45</a>
      
    
      
        <a href="/posts/46">46</a>
      
    
      
        <em>47</em>
      
    
      
        <a href="/posts/48">48</a>
      
    
      
        <a href="/posts/49">49</a>
      
    
      
        <a href="/posts/50">50</a>
      
    
      
        <a href="/posts/51">51</a>
      
    
      
        <a href="/posts/52">52</a>
      
    
      
        <a href="/posts/53">53</a>
      
    
      
        <a href="/posts/54">54</a>
      
    
      
        <a href="/posts/55">55</a>
      
    
      
        <a href="/posts/56">56</a>
      
    
  
    
      <a href="/posts/48">Next »</a>
    
  </div>
  
  
    <div class="pagination">
      <a href="/blog/archives">Blog Archives</a>
    </div>
  </div>
  <aside class="sidebar">
    
      
    
  </aside>
  
    </div>
    <footer role="contentinfo" class="footer_css">  <script src="/javascripts/modernizr-2.0.js"></script>
    <script src="/javascripts/libs/jquery.min.js"></script>
    <script src="/javascripts/octopress.js" type="text/javascript"></script>
    Copyright © 2017 - 54chen -
  
  </footer>
    
  
  
  
  
  
  
  
  
  </div>
</body>
  </html>
